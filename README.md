# 🟦🌧️ Sweatin'SkyBlue

**팀 릴레이 조깅을 통해 우울증 환자들이 운동 습관을 형성하고 심리적 부담을 줄일 수 있도록 돕는 상호 지원 커뮤니티 플랫폼**

**개발 기간**: 2025.11.25 ~ 2025.12.02 (8일, 1인 풀스택 개발)

---

## 📖 목차

- [프로젝트 소개](#-프로젝트-소개)
- [핵심 기능](#-핵심-기능)
- [기술 스택](#-기술-스택)
- [주요 화면](#-주요-화면)

---

## 💡 프로젝트 소개

### 왜 이 서비스를 만들었나요?

조깅은 많은 연구에서 우울증 핵심 치료법으로 권고되지만, 환자들은 개인 의지력만으로 운동 습관을 유지하기 어렵습니다. **Sweatin'SkyBlue**는 릴레이 조깅 시스템으로 강제성과 동반자 효과를 제공하며, 익명 커뮤니티로 낙인 없이 감정을 표현할 수 있는 안전한 공간을 만듭니다.

### 🎯 핵심 설계 원칙

- ✅ **효과적이고 저렴하며 접근 가능** - 조깅의 강력한 항우울 효과 활용
- ✅ **환자 특성에 맞춤** - 심리적 투여 최소화, 이전 주자 도착 시 다음 주자 자동 출발
- ✅ **낙인 감소** - 비슷한 경험을 가진 사람들과 익명 트리홀 기능
- ✅ **선택의 자유 존중** - 어떠한 인지적/이념적 틀도 강요하지 않음

---

## 🚀 핵심 기능

### 1. 🏃 릴레이 조깅 시스템

**이전 주자 도착 → 다음 주자 출발**하는 릴레이 구조로 개인 의지력 의존도를 낮춥니다.

- **역할 전환**: 주자 → 동반자로 전환되며 함께 달림
- **팀장 Skip 기능**: 지각/미완료 시 다음 주자에게 영향 없이 진행
- **완료율 시스템**: 신용도 지표로 활용 (팀장 자격 90% 이상)
- **React State 기반 상태 관리**: useState, useEffect로 타이머 및 역할 전환 구현

<p align="center">
   <img src="./img/relayleaderstart.png" alt="릴레이 진행" width="400"/>
   <img src="./img/skip.png" alt="Skip 기능" width="400"/>
</p>

### 2. 📝 3개 구역 커뮤니티 피드

- **운동 구역**: 활동 기록 공유, 함께 달린 팀원 자동 표시
- **일상 구역**: 일상 경험 자유롭게 공유
- **발산 구역 (익명)**: 낙인 없이 부정적 감정 표현 가능한 트리홀

**기능**: 좋아요, 댓글, 북마크, 수정/삭제, 지역/구역별 필터링, 검색

<p align="center">
   <img src="./img/feeddetail.png" alt="피드 상세" width="400"/>
   <img src="./img/ventfeed2.png" alt="익명 피드" width="400"/>
</p>

### 3. 👥 팀 관리

**팀 생성 (팀장)**
- 완료율 90% 이상 자격 조건
- 경로, 강도, 시간, 최대 인원 직접 설계
- 각 팀원에게 구간 배정

**팀 가입 (팀원)**
- 지역(Daum 우편번호 API)/강도별 필터링
- 신청서: 건강 상태, 직업, 신청 이유, 희망 구간
- 팀장 승인/거절 시스템

<p align="center">
   <img src="./img/teamdetail.png" alt="팀 상세" width="350"/>
</p>

### 4. 💬 실시간 통신

**Socket.io 4.8.1 WebSocket 기반**
- 팀 채팅 (팀 모집 완료 후 자동 생성)
- 1:1 채팅 (프로필에서 메시지 버튼)
- 실시간 알림 (좋아요, 댓글, 팔로우, 팀 가입 신청/승인)

<p align="center">
   <img src="./img/groupchat.png" alt="팀 채팅" width="350"/>
</p>

### 5. 👤 프로필 & 소셜 기능

- 팔로우/팔로워 시스템
- 완료율 표시 (신용도 지표)
- 내 팀 / 가입된 팀 조회
- 저장한 피드 모아보기

<p align="center">
   <img src="./img/profile.png" alt="프로필" width="350"/>
</p>

---

## 🔧 기술 스택

### 개발 환경

| 구분 | 내용 |
|------|------|
| **개발 기간** | 2025.11.25 ~ 2025.12.02 (8일) |
| **개발 인원** | 1명 (풀스택) |
| **개발 환경** | Windows / macOS |
| **IDE** | Visual Studio Code |
| **버전 관리** | Git / GitHub |

### 기술 스택

| 분류 | 기술 | 버전 |
|------|------|------|
| **Frontend** | React | 18.3.1 |
| | Material-UI | 6.1.5 |
| | React Router | 6.27.0 |
| | Socket.io-client | 4.8.1 |
| | jwt-decode | 4.0.0 |
| **Backend** | Node.js | 24.11.1 |
| | Express | 5.1.0 |
| | Socket.io | 4.7.2 |
| | JWT | 9.0.2 |
| | bcrypt | 6.0.0 |
| | Multer | 2.0.2 |
| **Database** | MySQL | 8.0 |
| **External API** | Daum Postcode | - |

---

## 📱 주요 화면

### 🔐 회원가입 & 로그인

**JWT 토큰 기반 인증**, bcrypt 비밀번호 해싱, Daum API 주소 검색

<p align="center">
   <img src="./img/signup.png" alt="회원가입" width="300"/>
   <img src="./img/login1.png" alt="로그인" width="300"/>
</p>

---

### 🏃 팀 생성 & 가입

<p align="center">
   <img src="./img/creategroup2.png" alt="팀 생성" width="300"/>
   <img src="./img/teamselection.png" alt="팀 선택" width="300"/>
</p>

---

### 💬 커뮤니티 & 알림

<p align="center">
   <img src="./img/runfeedbefore.png" alt="운동 피드" width="300"/>
   <img src="./img/newnoti1.png" alt="알림" width="300"/>
</p>

---

## 🔧 개발 과정 및 문제 해결

### 주요 도전 과제

**1. 제한된 학습 시간과 건강 관리**

React 학습 시간이 부족한 상태에서 프로젝트를 시작해야 했고, 개발 중 건강 악화로 더욱 어려움을 겪었습니다.

**해결 방안:**
- 충분한 수면 시간을 확보하며 건강 관리 우선
- 주말과 여가 시간을 최대한 활용하여 학습 시간 확보
- React 공식 문서와 실제 코드 작성을 병행하며 빠르게 학습
- 우선순위를 명확히 설정: 핵심 기능 먼저 구현 → 부가 기능 추가

**2. React State 관리의 복잡성**

릴레이 시스템의 역할 전환과 타이머 동기화를 구현하는 과정에서 React의 상태 관리가 복잡했습니다.

**해결 방안:**
- `useState`와 `useEffect`를 활용한 체계적인 상태 관리 패턴 학습
- 컴포넌트 구조를 재설계하여 상태 흐름을 단순화
- 콘솔 로그를 활용한 디버깅으로 상태 변화 추적
- 작은 단위로 기능을 분리하여 테스트 후 통합

**3. Socket.io 실시간 통신 구현**

실시간 채팅과 알림 시스템을 처음 구현하면서 클라이언트-서버 간 통신 동기화에 어려움을 겪었습니다.

**해결 방안:**
- Socket.io 공식 문서를 참고하여 이벤트 기반 통신 패턴 이해
- 채팅방별 room 개념을 활용하여 메시지 라우팅 구조화
- 연결 끊김 시 재연결 로직 추가로 안정성 확보
- 클라이언트와 서버의 이벤트 이름 규칙을 통일하여 관리 용이성 향상

**4. 데이터베이스 설계 및 재설계**

초기에는 단순한 테이블 구조로 시작했으나, 릴레이 조깅의 복잡한 비즈니스 로직을 제대로 반영하지 못해 개발 중 상당한 시간을 낭비했습니다.

**문제 상황:**
- 릴레이 순서, 역할 전환(주자↔동반자), 완료 여부, Skip 처리를 단순 테이블로 관리 시도
- 주자의 실시간 상태 추적과 다음 주자에게 정보 전달이 어려움
- 개인별 완료율 계산 시 데이터 정합성 문제 발생

**해결 방안:**

릴레이 로직을 세분화하여 **14개 테이블**로 재구성, 역할 전환 추적(`role`, `relayFromUserId`), Skip 처리(`status` enum), 완료율 자동 계산(`completionRate`) 등 핵심 기능을 테이블 구조에 반영했습니다.

- **정규화**: 경로, 구간, 활동, 개인 기록을 분리하여 데이터 중복 제거
- **인덱싱**: groupId + userId 복합 인덱스로 조회 성능 최적화
- **외래키 제약**: CASCADE 옵션으로 데이터 무결성 보장

**교훈:**

이러한 도전을 통해 **8일이라는 짧은 기간 내에 풀스택 애플리케이션을 완성**할 수 있었으며, React, Node.js, Socket.io, MySQL을 활용한 실시간 웹 서비스 개발 역량을 크게 향상시켰습니다. 특히 **요구사항 분석의 중요성**과 **확장 가능한 데이터베이스 설계 원칙**을 실전에서 체득했습니다.턴 학습
- 컴포넌트 구조를 재설계하여 상태 흐름을 단순화
- 콘솔 로그를 활용한 디버깅으로 상태 변화 추적
- 작은 단위로 기능을 분리하여 테스트 후 통합

**3. Socket.io 실시간 통신 구현**

실시간 채팅과 알림 시스템을 처음 구현하면서 클라이언트-서버 간 통신 동기화에 어려움을 겪었습니다.

**해결 방안:**
- Socket.io 공식 문서를 참고하여 이벤트 기반 통신 패턴 이해
- 채팅방별 room 개념을 활용하여 메시지 라우팅 구조화
- 연결 끊김 시 재연결 로직 추가로 안정성 확보
- 클라이언트와 서버의 이벤트 이름 규칙을 통일하여 관리 용이성 향상

**4. 데이터베이스 설계 및 재설계**

초기에는 단순한 테이블 구조로 시작했으나, 릴레이 조깅의 복잡한 비즈니스 로직을 제대로 반영하지 못해 개발 중 상당한 시간을 낭비했습니다.

**문제 상황:**
- 릴레이 순서, 역할 전환(주자↔동반자), 완료 여부, Skip 처리를 단순 테이블로 관리 시도
- 주자의 실시간 상태 추적과 다음 주자에게 정보 전달이 어려움
- 개인별 완료율 계산 시 데이터 정합성 문제 발생
- 팀별 활동 이력과 개인 기록을 동시에 조회하는 쿼리가 비효율적

**해결 방안: 테이블 재설계**

릴레이 로직을 세분화하여 **14개 테이블**로 재구성, 각 테이블의 역할을 명확히 분리:

| 테이블 | 역할 | 주요 컬럼 |
|--------|------|----------|
| `tbl_activity_history` | 릴레이 세션 관리 | activityId, groupId, scheduledDate/Time, status |
| `tbl_activity_segment_record` | 개인별 구간 진행 상태 | recordId, role(main_runner/companion), actualStartTime, status |
| `tbl_route` & `tbl_route_segment` | 경로 및 구간 정보 | routeId, segmentOrder, estimatedTime, maxTime |
| `tbl_group_member` | 팀원 완료율 관리 | totalActivities, completedActivities, completionRate |
| `tbl_notification` | 실시간 알림 | notificationType, relatedType, isRead |
| `tbl_chat_room` & `tbl_chat_member` | 채팅방 및 멤버 관리 | roomType(group/private), lastReadAt |
| `tbl_feed` & `tbl_feed_img` | 피드 및 이미지 | feedType(group/daily/vent), isAnonymous |
| `users_tbl` | 사용자 정보 | userId, completionRate(전체 완료율) |

**핵심 설계 포인트:**

1. **역할 전환 추적**: `tbl_activity_segment_record`에서 `role` 컬럼으로 main_runner/companion 구분, `relayFromUserId`로 이전 주자 추적

2. **Skip 처리**: `status` enum(waiting, running, completed, overtime, **skipped**)로 구간별 상태 명확히 관리

3. **완료율 계산**: `tbl_group_member`에서 `totalActivities`, `completedActivities`, `completionRate` 자동 계산 및 업데이트

4. **정규화**: 경로(route), 구간(segment), 활동(activity), 개인 기록(record)을 분리하여 데이터 중복 제거

5. **효율적인 조회**: 
   - groupId + userId 복합 인덱스로 팀원별 조회 최적화
   - activityId 기준 JOIN으로 한 활동의 전체 기록 한 번에 조회

**교훈:**

초기 설계 단계에서 비즈니스 로직의 복잡도를 충분히 분석하지 못해 시간을 낭비했지만, 이를 통해 **요구사항 분석의 중요성**과 **확장 가능한 데이터베이스 설계 원칙**(정규화, 인덱싱, 역할 분리)을 깊이 이해하게 되었습니다. 특히 enum 타입과 외래키 제약조건을 활용한 데이터 무결성 보장 방법을 실전에서 체득했습니다.

### 성과

이러한 도전을 통해 **8일이라는 짧은 기간 내에 풀스택 애플리케이션을 완성**할 수 있었으며, React, Node.js, Socket.io, MySQL을 활용한 실시간 웹 서비스 개발 역량을 크게 향상시켰습니다.

---

## 📧 문의

3228302551@qq.com

---

## 📄 라이선스

이 프로젝트는 개인 포트폴리오용으로 제작되었습니다.
